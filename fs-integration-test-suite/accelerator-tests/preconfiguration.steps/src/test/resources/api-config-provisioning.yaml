apis:
  - apiFilePath: '../../../financial-services-accelerator/accelerators/fs-apim/repository/resources/apis/Accounts/account-info-swagger.yaml'
    apiName: 'AccountandTransactionAPI'
    context: '/open-banking/{version}/aisp'
    apiVersion: 'v3.1'
    endpointType: 'default'
    enableSchemaValidation: 'true'
    scope: 'accounts'
    apiProperty:
      - api-resource: '/account-access-consents'
        requestType: 'POST'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
      - api-resource: '/account-access-consents/{ConsentId}'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
      - api-resource: '/account-access-consents/{ConsentId}'
        requestType: 'DELETE'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
      - api-resource: '/accounts'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
      - api-resource: '/accounts/{AccountId}'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
      - api-resource: '/accounts/{AccountId}/balances'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
      - api-resource: '/accounts/{AccountId}/transactions'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/account-access-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/accounts/accountservice'
  - apiFilePath: '../../../financial-services-accelerator/accelerators/fs-apim/repository/resources/apis/ConfirmationOfFunds/funds-confirmation-openapi.yaml'
    apiName: 'ConfirmationOfFundsAPI'
    context: '/open-banking/{version}/cbpii'
    apiVersion: 'v3.1'
    endpointType: 'default'
    enableSchemaValidation: 'true'
    scope: 'fundsconfirmations'
    apiProperty:
      - api-resource: '/funds-confirmation-consents'
        requestType: 'POST'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/funds-confirmation-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/fundsConfirmation/fundsconfirmationservice'
      - api-resource: '/funds-confirmation-consents/{consentId}'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/funds-confirmation-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/fundsConfirmation/fundsconfirmationservice'
      - api-resource: '/funds-confirmation-consents/{consentId}'
        requestType: 'DELETE'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/funds-confirmation-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/fundsConfirmation/fundsconfirmationservice'
      - api-resource: '/funds-confirmations'
        requestType: 'POST'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/funds-confirmation-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/fundsConfirmation/fundsconfirmationservice'
  - apiFilePath: '../../../financial-services-accelerator/accelerators/fs-apim/repository/resources/apis/Payments/payment-initiation-openapi.yaml'
    apiName: 'PaymentInitiationAPI'
    context: '/open-banking/{version}/pisp'
    apiVersion: 'v3.1'
    endpointType: 'default'
    enableSchemaValidation: 'true'
    scope: 'payments'
    apiProperty:
      - api-resource: '/payment-consents'
        requestType: 'POST'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/payment-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/payments/paymentservice'
      - api-resource: '/payment-consents/{consentId}'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/payment-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/payments/paymentservice'
      - api-resource: '/payment-consents/{consentId}/funds-confirmation'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/payment-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/payments/paymentservice'
      - api-resource: '/payments'
        requestType: 'POST'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION_USER'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'ConsentEnforcement'
            policyAttributes:
              - attribute: 'consentIdClaimName'
                attributeValue: 'consent_id'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/payment-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/payments/paymentservice'
      - api-resource: '/payments/{paymentId}'
        requestType: 'GET'
        policy:
          - name: 'jwtClaimBasedAccessValidator'
            policyAttributes:
              - attribute: 'accessVerificationClaim'
                attributeValue: 'aut'
              - attribute: 'accessVerificationClaimValue'
                attributeValue: 'APPLICATION'
              - attribute: 'accessVerificationClaimValueRegex'
                attributeValue: ''
              - attribute: 'shouldAllowValidation'
                attributeValue: 'false'
          - name: 'DynamicEndpoint'
            policyAttributes:
              - attribute: 'consentServiceRoutingRegexPattern'
                attributeValue: '.*\/payment-consents.*'
              - attribute: 'consentServiceBasicAuthCredentials'
                attributeValue: 'aXNfYWRtaW5Ad3NvMi5jb206d3NvMjEyMw=='
              - attribute: 'consentServiceBaseUrl'
                attributeValue: 'https://localhost:9446'
              - attribute: 'bankBackendBaseUrl'
                attributeValue: 'https://localhost:9443/api/fs/backend/services/payments/paymentservice'
policy:
  - policyFilePath: '../../test-artifacts/api_policies/mtls-enforcement/mtlsEnforcementPolicy.j2'
    policyName: 'MTLSEnforcement'
    policyAttribute:
      - name: 'transportCertAsHeaderEnabled'
        description: 'Switch to determine if the transport certificate is sent as a header in the request'
        required: 'false'
        type: 'Boolean'
      - name: 'transportCertHeaderName'
        description: 'The name of the transport certificate header'
        required: 'false'
        type: 'String'
      - name: 'isClientCertificateEncoded'
        description: 'Switch to determine if the transport certificate sent as a header in the request is encoded'
        required: 'false'
        type: 'Boolean'
  - policyFilePath: '../../test-artifacts/api_policies/consent-enforcement/consentEnforcementPolicy.j2'
    policyName: 'ConsentEnforcement'
    policyAttribute:
      - name: 'consentIdClaimName'
        description: 'The name of the claim that represents the consent ID on the user access token'
        required: 'true'
        type: 'String'
      - name: 'consentServiceBasicAuthCredentials'
        description: 'Base64 encoded(admin-username:admin-password) basic auth credentials required to access the consent service'
        required: 'true'
        type: 'String'
      - name: 'consentServiceBaseUrl'
        description: 'Base URL of the consent service'
        required: 'true'
        type: 'String'
  - policyFilePath: '../../test-artifacts/api_policies/dynamic-endpoint/dynamicEndpointPolicy.j2'
    policyName: 'DynamicEndpoint'
    policyAttribute:
      - name: 'consentServiceRoutingRegexPattern'
        description: 'The regex pattern to route requests to the consent service based on the request URL'
        required: 'true'
        type: 'String'
      - name: 'consentServiceBasicAuthCredentials'
        description: 'Base64 encoded(admin-username:admin-password) basic auth credentials required to access the consent service'
        required: 'true'
        type: 'String'
      - name: 'consentServiceBaseUrl'
        description: 'Base URL of the consent service'
        required: 'true'
        type: 'String'
      - name: 'bankBackendBaseUrl'
        description: 'Base URL of the bank back end'
        required: 'true'
        type: 'String'
  - policyFilePath: '../../test-artifacts/api_policies/dynamic-client-registration/dynamicClientRegistrationRequestPolicy.j2'
    policyName: 'DynamicClientRegistrationRequest'
    policyAttribute:
      - name: 'validateRequestJWT'
        description: 'Determine whether the request JWT signature should be validated'
        required: 'true'
        type: 'Boolean'
      - name: 'jwksEndpointName'
        description: 'JWKS Endpoint field name in the request.'
        required: 'true'
        type: 'String'
      - name: 'clientNameAttributeName'
        description: 'The field name of the attribute that should be used as the name of the application.  This value will be used if useSoftwareIdAsAppName is disabled.'
        required: 'true'
        type: 'String'
      - name: 'useSoftwareIdAsAppName'
        description: 'Determine whether the software Id should be used as application name'
        required: 'true'
        type: 'Boolean'
      - name: 'jwksEndpointTimeout'
        description: 'Timeout for the JWKS Endpoint'
        required: 'true'
        type: 'Integer'

