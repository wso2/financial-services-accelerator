swagger: '2.0'
info:
  title: AccountandTransactionAPI
  description: Swagger for Account and Transaction API Specification
  version: v3.1
basePath: /open-banking/{version}/aisp
tags:
  - name: Account Access
    description: Account Access Consents
  - name: Accounts
    description: Accounts
  - name: Balances
    description: Balances
  - name: Transactions
    description: Transactions
schemes:
  - https
consumes:
  - application/json; charset=utf-8
produces:
  - application/json; charset=utf-8
security:
  - default: []
paths:
  '/account-access-consents':
    post:
      tags:
        - Account Access
      summary: Create Account Access Consents
      operationId: CreateAccountAccessConsents
      parameters:
        - $ref: '#/parameters/OBReadConsent1Param'
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '201':
          $ref: '#/responses/201AccountAccessConsentsCreated'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '404':
          $ref: '#/responses/404Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - TPPOAuth2Security:
            - accounts
        - default:
            - accounts
      x-auth-type: Application
      x-throttling-tier: Unlimited
      x-scope: accounts
  '/account-access-consents/{ConsentId}':
    get:
      tags:
        - Account Access
      summary: Get Account Access Consents
      operationId: GetAccountAccessConsentsConsentId
      parameters:
        - $ref: '#/parameters/ConsentId'
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '200':
          $ref: '#/responses/200AccountAccessConsentsConsentIdRead'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '404':
          $ref: '#/responses/404Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - TPPOAuth2Security:
            - accounts
        - default:
            - accounts
      x-auth-type: Application
      x-throttling-tier: Unlimited
      x-scope: accounts
    delete:
      tags:
        - Account Access
      summary: Delete Account Access Consents
      operationId: DeleteAccountAccessConsentsConsentId
      parameters:
        - $ref: '#/parameters/ConsentId'
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '204':
          $ref: '#/responses/204AccountAccessConsentsConsentIdDeleted'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '404':
          $ref: '#/responses/404Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - TPPOAuth2Security:
            - accounts
        - default:
            - accounts
      x-auth-type: Application
      x-throttling-tier: Unlimited
      x-scope: accounts
  '/accounts':
    get:
      tags:
        - Accounts
      summary: Get Accounts
      operationId: GetAccounts
      parameters:
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '200':
          $ref: '#/responses/200AccountsRead'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - PSUOAuth2Security:
            - accounts
        - default:
            - accounts
      x-auth-type: Application User
      x-throttling-tier: Unlimited
      x-scope: accounts
  '/accounts/{AccountId}':
    get:
      tags:
        - Accounts
      summary: Get Accounts
      operationId: GetAccountsAccountId
      parameters:
        - $ref: '#/parameters/AccountId'
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '200':
          $ref: '#/responses/200AccountsAccountIdRead'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '404':
          $ref: '#/responses/404Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - PSUOAuth2Security:
            - accounts
      x-auth-type: Application User
      x-throttling-tier: Unlimited
      x-scope: accounts
  '/accounts/{AccountId}/balances':
    get:
      tags:
        - Balances
      summary: Get Balances
      operationId: GetAccountsAccountIdBalances
      parameters:
        - $ref: '#/parameters/AccountId'
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '200':
          $ref: '#/responses/200AccountsAccountIdBalancesRead'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '404':
          $ref: '#/responses/404Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - PSUOAuth2Security:
            - accounts
        - default:
            - accounts
      x-auth-type: Application User
      x-throttling-tier: Unlimited
      x-scope: accounts
  '/accounts/{AccountId}/transactions':
    get:
      tags:
        - Transactions
      summary: Get Transactions
      operationId: GetAccountsAccountIdTransactions
      parameters:
        - $ref: '#/parameters/AccountId'
        - $ref: '#/parameters/x-fapi-auth-date'
        - $ref: '#/parameters/x-fapi-customer-ip-address'
        - $ref: '#/parameters/x-fapi-interaction-id'
        - $ref: '#/parameters/Authorization'
      responses:
        '200':
          $ref: '#/responses/200AccountsAccountIdTransactionsRead'
        '400':
          $ref: '#/responses/400Error'
        '401':
          $ref: '#/responses/401Error'
        '403':
          $ref: '#/responses/403Error'
        '404':
          $ref: '#/responses/404Error'
        '405':
          $ref: '#/responses/405Error'
        '406':
          $ref: '#/responses/406Error'
        '429':
          $ref: '#/responses/429Error'
        '500':
          $ref: '#/responses/500Error'
      security:
        - PSUOAuth2Security:
            - accounts
        - default:
            - accounts
      x-auth-type: Application User
      x-throttling-tier: Unlimited
      x-scope: accounts
parameters:
  OBReadConsent1Param:
    name: OBReadConsent1Param
    in: body
    description: Default
    required: true
    schema:
      $ref: '#/definitions/OBReadConsent1'
  Authorization:
    in: header
    name: Authorization
    type: string
    required: true
    description: 'An Authorisation Token as per https://tools.ietf.org/html/rfc6750'
  x-fapi-customer-ip-address:
    in: header
    name: x-fapi-customer-ip-address
    type: string
    required: false
    description: The PSU's IP address if the PSU is currently logged in with the TPP.
  x-fapi-auth-date:
    in: header
    name: x-fapi-auth-date
    type: string
    required: false
    description: >-
      The time when the PSU last logged in with the TPP.

      All dates in the HTTP headers are represented as RFC 7231 Full Dates. An
      example is below:

      Sun, 10 Sep 2017 19:43:31 UTC
    pattern: >-
      ^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d{2}
      (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d{4} \d{2}:\d{2}:\d{2}
      (GMT|UTC)$
  ConsentId:
    name: ConsentId
    in: path
    description: ConsentId
    required: true
    type: string
  AccountId:
    name: AccountId
    in: path
    description: AccountId
    required: true
    type: string
  x-fapi-interaction-id:
    in: header
    name: x-fapi-interaction-id
    type: string
    required: false
    description: An RFC4122 UID used as a correlation id.
responses:
  201AccountAccessConsentsCreated:
    description: Account Access Consents Created
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBReadConsentResponse1'
  200AccountAccessConsentsConsentIdRead:
    description: Account Access Consents Read
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBReadConsentResponse1'
  204AccountAccessConsentsConsentIdDeleted:
    description: Account Access Consents Deleted
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  200AccountsRead:
    description: Accounts Read
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBReadAccount5'
  200AccountsAccountIdRead:
    description: Accounts Read
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBReadAccount4'
  200AccountsAccountIdBalancesRead:
    description: Balances Read
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBReadBalance1'
  200AccountsAccountIdTransactionsRead:
    description: Transactions Read
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBReadTransaction5'
  400Error:
    description: Bad request
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBErrorResponse1'
  401Error:
    description: Unauthorized
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  403Error:
    description: Forbidden
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBErrorResponse1'
  404Error:
    description: Not found
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  405Error:
    description: Method Not Allowed
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  406Error:
    description: Not Acceptable
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  415Error:
    description: Unsupported Media Type
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  429Error:
    description: Too Many Requests
    headers:
      Retry-After:
        description: Number in seconds to wait
        type: integer
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
  500Error:
    description: Internal Server Error
    headers:
      x-fapi-interaction-id:
        type: string
        description: An RFC4122 UID used as a correlation id.
    schema:
      $ref: '#/definitions/OBErrorResponse1'
securityDefinitions:
  TPPOAuth2Security:
    type: oauth2
    flow: application
    tokenUrl: 'https://authserver.example/token'
    scopes:
      accounts: Ability to read Accounts information
    description: TPP client credential authorisation flow with the ASPSP
    x-scopes-bindings:
      accounts: Internal/subscriber
  PSUOAuth2Security:
    type: oauth2
    flow: accessCode
    tokenUrl: 'https://authserver.example/token'
    authorizationUrl: 'https://authserver.example/authorization'
    scopes:
      accounts: Ability to read Accounts information
    description: >-
      OAuth flow, it is required when the PSU needs to perform SCA with the
      ASPSP when a TPP wants to access an ASPSP resource owned by the PSU
    x-scopes-bindings:
      accounts: Internal/subscriber
  default:
    type: oauth2
    authorizationUrl: 'https://test.com'
    flow: implicit
    scopes:
      accounts: Ability to read Accounts information
    x-scopes-bindings:
      accounts: Internal/subscriber
definitions:
  OBReadConsent1:
    type: object
    required:
      - Data
      - Risk
    properties:
      Data:
        $ref: '#/definitions/OBReadData1'
      Risk:
        $ref: '#/definitions/OBRisk2'
  OBReadConsentResponse1:
    type: object
    required:
      - Data
      - Risk
    properties:
      Data:
        type: object
        required:
          - ConsentId
          - CreationDateTime
          - StatusUpdateDateTime
          - Permissions
        properties:
          ConsentId:
            description: >-
              Unique identification as assigned to identify the account access
              consent resource.
            type: string
            minLength: 1
            maxLength: 128
          CreationDateTime:
            $ref: '#/definitions/CreationDateTime'
          Status:
            $ref: '#/definitions/OBExternalRequestStatus1Code'
          StatusUpdateDateTime:
            $ref: '#/definitions/StatusUpdateDateTime'
          Permissions:
            type: array
            items:
              $ref: '#/definitions/OBExternalPermissions1Code'
            minItems: 1
          ExpirationDateTime:
            description: >-
              Specified date and time the permissions will expire.

              If this is not populated, the permissions will be open ended.All
              dates in the JSON payloads are represented in ISO 8601 date-time
              format.

              All date-time fields in responses must include the timezone. An
              example is below:

              2017-04-05T10:43:07+00:00
            type: string
            format: date-time
          TransactionFromDateTime:
            description: >-
              Specified start date and time for the transaction query period.

              If this is not populated, the start date will be open ended, and
              data will be returned from the earliest available transaction.All
              dates in the JSON payloads are represented in ISO 8601 date-time
              format.

              All date-time fields in responses must include the timezone. An
              example is below:

              2017-04-05T10:43:07+00:00
            type: string
            format: date-time
          TransactionToDateTime:
            description: >-
              Specified end date and time for the transaction query period.

              If this is not populated, the end date will be open ended, and
              data will be returned to the latest available transaction.All
              dates in the JSON payloads are represented in ISO 8601 date-time
              format.

              All date-time fields in responses must include the timezone. An
              example is below:

              2017-04-05T10:43:07+00:00
            type: string
            format: date-time
      Risk:
        $ref: '#/definitions/OBRisk2'
      Links:
        $ref: '#/definitions/Links'
      Meta:
        $ref: '#/definitions/Meta'
  OBReadData1:
    type: object
    required:
      - Permissions
    properties:
      Permissions:
        type: array
        items:
          $ref: '#/definitions/OBExternalPermissions1Code'
        minItems: 1
        description: >-
          Specifies the Open Banking account access data types. This is a list
          of the data clusters being consented by the PSU, and requested for
          authorisation with the ASPSP.
      ExpirationDateTime:
        description: >-
          Specified date and time the permissions will expire.

          If this is not populated, the permissions will be open ended.All
          dates in the JSON payloads are represented in ISO 8601 date-time
          format.

          All date-time fields in responses must include the timezone. An
          example is below:

          2017-04-05T10:43:07+00:00
        type: string
        format: date-time
      TransactionFromDateTime:
        description: >-
          Specified start date and time for the transaction query period.

          If this is not populated, the start date will be open ended, and
          data will be returned from the earliest available transaction.All
          dates in the JSON payloads are represented in ISO 8601 date-time
          format.

          All date-time fields in responses must include the timezone. An
          example is below:

          2017-04-05T10:43:07+00:00
        type: string
        format: date-time
      TransactionToDateTime:
        description: >-
          Specified end date and time for the transaction query period.

          If this is not populated, the end date will be open ended, and
          data will be returned to the latest available transaction.All
          dates in the JSON payloads are represented in ISO 8601 date-time
          format.

          All date-time fields in responses must include the timezone. An
          example is below:

          2017-04-05T10:43:07+00:00
        type: string
        format: date-time
  OBRisk2:
    description: >-
      The Risk section is sent by the initiating party to the ASPSP. It is used
      to specify additional details for risk scoring for Account Info.
    type: object
    properties: {}
    additionalProperties: false
  OBExternalPermissions1Code:
    description: >-
      Specifies the Open Banking account access data types. This is a
          list of the data clusters being consented by the PSU, and
          requested for authorisation with the ASPSP.
    type: string
    enum:
      - ReadAccountsBasic
      - ReadAccountsDetail
      - ReadBalances
      - ReadTransactionsDetail
  CreationDateTime:
    description: >-
      Date and time at which the resource was created.All dates in the JSON
      payloads are represented in ISO 8601 date-time format.

      All date-time fields in responses must include the timezone. An example is
      below:

      2017-04-05T10:43:07+00:00
    type: string
    format: date-time
  StatusUpdateDateTime:
    description: >-
      Date and time at which the resource status was updated.All dates in the
      JSON payloads are represented in ISO 8601 date-time format.

      All date-time fields in responses must include the timezone. An example is
      below:

      2017-04-05T10:43:07+00:00
    type: string
    format: date-time
  OBExternalRequestStatus1Code:
    description: Specifies the status of consent resource in code form.
    type: string
    enum:
      - Authorised
      - AwaitingAuthorisation
      - Rejected
      - Revoked
  OBReadAccount4:
    type: object
    required:
      - Data
    properties:
      Data:
        type: object
        properties:
          Account:
            type: array
            items:
              $ref: '#/definitions/OBAccount4'
      Links:
        $ref: '#/definitions/Links'
      Meta:
        $ref: '#/definitions/Meta'
  OBReadAccount5:
    type: object
    required:
      - Data
    properties:
      Data:
        type: object
        properties:
          Account:
            type: array
            items:
              $ref: '#/definitions/OBAccount4'
      Links:
        $ref: '#/definitions/Links'
      Meta:
        $ref: '#/definitions/Meta'
    additionalProperties: false
  OBAccount4:
    type: object
    description: >-
      Unambiguous identification of the account to which credit and debit
      entries are made.
    required:
      - AccountId
      - Currency
      - AccountType
      - AccountSubType
    properties:
      AccountId:
        $ref: '#/definitions/AccountId'
      Status:
        $ref: '#/definitions/OBAccountStatus1Code'
      StatusUpdateDateTime:
        $ref: '#/definitions/StatusUpdateDateTime'
      Currency:
        $ref: '#/definitions/ActiveOrHistoricCurrencyCode'
      AccountType:
        $ref: '#/definitions/OBExternalAccountType1Code'
      AccountSubType:
        $ref: '#/definitions/OBExternalAccountSubType1Code'
      Description:
        $ref: '#/definitions/Description'
      Nickname:
        $ref: '#/definitions/Nickname'
      Account:
        type: array
        items:
          type: object
          description: Provides the details to identify an account.
          required:
            - SchemeName
            - Identification
          properties:
            SchemeName:
              $ref: '#/definitions/OBExternalAccountIdentification4Code'
            Identification:
              $ref: '#/definitions/Identification'
            Name:
              $ref: '#/definitions/Name'
            SecondaryIdentification:
              $ref: '#/definitions/SecondaryIdentification'
      Servicer:
        $ref: '#/definitions/OBBranchAndFinancialInstitutionIdentification5'
  OBReadBalance1:
    type: object
    required:
      - Data
    properties:
      Data:
        type: object
        required:
          - Balance
        properties:
          Balance:
            type: array
            items:
              type: object
              description: Set of elements used to define the balance details.
              required:
                - AccountId
                - CreditDebitIndicator
                - Type
                - DateTime
                - Amount
              properties:
                AccountId:
                  $ref: '#/definitions/AccountId'
                CreditDebitIndicator:
                  $ref: '#/definitions/OBCreditDebitCode'
                Type:
                  $ref: '#/definitions/OBBalanceType1Code'
                DateTime:
                  description: >-
                    Indicates the date (and time) of the balance.All dates in
                    the JSON payloads are represented in ISO 8601 date-time
                    format.

                    All date-time fields in responses must include the timezone.
                    An example is below:

                    2017-04-05T10:43:07+00:00
                  type: string
                  format: date-time
                Amount:
                  type: object
                  required:
                    - Amount
                    - Currency
                  description: Amount of money of the cash balance.
                  properties:
                    Amount:
                      $ref: '#/definitions/OBActiveCurrencyAndAmount_SimpleType'
                    Currency:
                      $ref: '#/definitions/ActiveOrHistoricCurrencyCode'
                CreditLine:
                  type: array
                  items:
                    type: object
                    description: >-
                      Set of elements used to provide details on the credit
                      line.
                    required:
                      - Included
                    properties:
                      Included:
                        description: >-
                          Indicates whether or not the credit line is included
                          in the balance of the account.

                          Usage: If not present, credit line is not included in
                          the balance amount of the account.
                        type: boolean
                      Type:
                        description: 'Limit type, in a coded form.'
                        type: string
                        enum:
                          - Available
                          - Credit
                          - Emergency
                          - Pre-Agreed
                          - Temporary
                      Amount:
                        type: object
                        required:
                          - Amount
                          - Currency
                        description: Amount of money of the credit line.
                        properties:
                          Amount:
                            $ref: '#/definitions/OBActiveCurrencyAndAmount_SimpleType'
                          Currency:
                            $ref: '#/definitions/ActiveOrHistoricCurrencyCode'
            minItems: 1
      Links:
        $ref: '#/definitions/Links'
      Meta:
        $ref: '#/definitions/Meta'
  OBReadTransaction5:
    type: object
    required:
      - Data
    properties:
      Data:
        $ref: '#/definitions/OBReadDataTransaction5'
      Links:
        $ref: '#/definitions/Links'
      Meta:
        $ref: '#/definitions/Meta'
  OBReadDataTransaction5:
    type: object
    properties:
      Transaction:
        type: array
        items:
          $ref: '#/definitions/OBTransaction5'
  OBTransaction5:
    type: object
    description: Provides further details on an entry in the report.
    required:
      - AccountId
      - CreditDebitIndicator
      - Status
      - BookingDateTime
      - Amount
    properties:
      AccountId:
        $ref: '#/definitions/AccountId'
      TransactionId:
        $ref: '#/definitions/TransactionId'
      TransactionReference:
        $ref: '#/definitions/TransactionReference'
      StatementReference:
        type: array
        items:
          $ref: '#/definitions/StatementReference'
      CreditDebitIndicator:
        $ref: '#/definitions/OBCreditDebitCode'
      Status:
        $ref: '#/definitions/OBEntryStatus1Code'
      BookingDateTime:
        $ref: '#/definitions/BookingDateTime'
      ValueDateTime:
        $ref: '#/definitions/ValueDateTime'
      TransactionInformation:
        $ref: '#/definitions/TransactionInformation'
      AddressLine:
        $ref: '#/definitions/AddressLine'
      Amount:
        $ref: '#/definitions/OBActiveOrHistoricCurrencyAndAmount'
      ChargeAmount:
        $ref: '#/definitions/OBActiveOrHistoricCurrencyAndAmount'
      CurrencyExchange:
        $ref: '#/definitions/OBCurrencyExchange5'
      BankTransactionCode:
        $ref: '#/definitions/OBBankTransactionCodeStructure1'
      ProprietaryBankTransactionCode:
        $ref: '#/definitions/ProprietaryBankTransactionCodeStructure1'
      Balance:
        $ref: '#/definitions/OBTransactionCashBalance'
      MerchantDetails:
        $ref: '#/definitions/OBMerchantDetails1'
      CreditorAgent:
        $ref: '#/definitions/OBBranchAndFinancialInstitutionIdentification6'
      CreditorAccount:
        $ref: '#/definitions/OBCashAccount6'
      DebtorAgent:
        $ref: '#/definitions/OBBranchAndFinancialInstitutionIdentification6'
      DebtorAccount:
        $ref: '#/definitions/OBCashAccount6'
      CardInstrument:
        $ref: '#/definitions/OBTransactionCardInstrument1'
      SupplementaryData:
        $ref: '#/definitions/OBSupplementaryData1'
  AccountId:
    description: >-
      A unique and immutable identifier used to identify the account resource.
      This identifier has no meaning to the account owner.
    type: string
    minLength: 1
    maxLength: 40
  OBAccountStatus1Code:
    description: Specifies the status of account resource in code form.
    type: string
    enum:
      - Deleted
      - Disabled
      - Enabled
      - Pending
      - ProForma
  ActiveOrHistoricCurrencyCode:
    description: >-
      Identification of the currency in which the account is held.

      Usage: Currency should only be used in case one and the same account
      number covers several currencies

      and the initiating party needs to identify which currency needs to be used
      for settlement on the account.
    type: string
    pattern: '^[A-Z]{3,3}$'
  OBExternalAccountType1Code:
    description: Specifies the type of account (personal or business).
    type: string
    enum:
      - Business
      - Personal
  OBExternalAccountSubType1Code:
    description: Specifies the sub type of account (product family group).
    type: string
    enum:
      - ChargeCard
      - CreditCard
      - CurrentAccount
      - EMoney
      - Loan
      - Mortgage
      - PrePaidCard
      - Savings
  Description:
    description: Specifies the description of the account type.
    type: string
    minLength: 1
    maxLength: 35
  Nickname:
    description: >-
      The nickname of the account, assigned by the account owner in order to
      provide an additional means of identification of the account.
    type: string
    minLength: 1
    maxLength: 70
  OBExternalAccountIdentification4Code:
    description: >-
      Name of the identification scheme, in a coded form as published in an
      external list.
    type: string
    x-namespaced-enum:
      - UK.OBIE.BBAN
      - UK.OBIE.IBAN
      - UK.OBIE.PAN
      - UK.OBIE.Paym
      - UK.OBIE.SortCodeAccountNumber
  Identification:
    description: >-
      Identification assigned by an institution to identify an account. This
      identification is known by the account owner.
    type: string
    minLength: 1
    maxLength: 256
  Name:
    description: >-
      The account name is the name or names of the account owner(s) represented
      at an account level, as displayed by the ASPSP's online channels.

      Note, the account name is not the product name or the nickname of the
      account.
    type: string
    minLength: 1
    maxLength: 70
  SecondaryIdentification:
    description: >-
      This is secondary identification of the account, as assigned by the
      account servicing institution.

      This can be used by building societies to additionally identify accounts
      with a roll number (in addition to a sort code and account number
      combination).
    type: string
    minLength: 1
    maxLength: 34
  OBBranchAndFinancialInstitutionIdentification5:
    type: object
    required:
      - SchemeName
      - Identification
    description: >-
      Party that manages the account on behalf of the account owner, that is
      manages the registration and booking of entries on the account, calculates
      balances on the account and provides information about the account.
    properties:
      SchemeName:
        $ref: '#/definitions/OBExternalFinancialInstitutionIdentification4Code'
      Identification:
        $ref: '#/definitions/Identification'
  OBExternalFinancialInstitutionIdentification4Code:
    description: >-
      Name of the identification scheme, in a coded form as published in an
      external list.
    type: string
    x-namespaced-enum:
      - UK.OBIE.BICFI
  OBCreditDebitCode:
    description: |-
      Indicates whether the balance is a credit or a debit balance.
      Usage: A zero balance is considered to be a credit balance.
    type: string
    enum:
      - Credit
      - Debit
  OBBalanceType1Code:
    description: 'Balance type, in a coded form.'
    type: string
    enum:
      - ClosingAvailable
      - ClosingBooked
      - ClosingCleared
      - Expected
      - ForwardAvailable
      - Information
      - InterimAvailable
      - InterimBooked
      - InterimCleared
      - OpeningAvailable
      - OpeningBooked
      - OpeningCleared
      - PreviouslyClosedBooked
  OBActiveCurrencyAndAmount_SimpleType:
    description: >-
      A number of monetary units specified in an active currency where the unit
      of currency is explicit and compliant with ISO 4217.
    type: string
    pattern: '^\d{1,13}\.\d{1,5}$'
  TransactionId:
    description: >-
      Unique identifier for the transaction within an servicing institution.
      This identifier is both unique and immutable.
    type: string
    minLength: 1
    maxLength: 210
  TransactionInformation:
    description: |-
      Further details of the transaction.
      This is the transaction narrative, which is unstructured text.
    type: string
    minLength: 1
    maxLength: 500
  TransactionReference:
    description: >-
      Unique reference for the transaction. This reference is optionally
      populated, and may as an example be the FPID in the Faster Payments
      context.
    type: string
    minLength: 1
    maxLength: 35
  StatementReference:
    description: >-
      Unique reference for the statement. This reference may be optionally
      populated if available.
    type: string
    minLength: 1
    maxLength: 35
  OBEntryStatus1Code:
    description: Status of a transaction entry on the books of the account servicer.
    type: string
    enum:
      - Booked
      - Pending
  BookingDateTime:
    description: >-
      Date and time when a transaction entry is posted to an account on the
      account servicer's books.

      Usage: Booking date is the expected booking date, unless the status is
      booked, in which case it is the actual booking date.All dates in the JSON
      payloads are represented in ISO 8601 date-time format.

      All date-time fields in responses must include the timezone. An example is
      below:

      2017-04-05T10:43:07+00:00
    type: string
    format: date-time
  ValueDateTime:
    description: >-
      Date and time at which assets become available to the account owner in
      case of a credit entry, or cease to be available to the account owner in
      case of a debit transaction entry.

      Usage: If transaction entry status is pending and value date is present,
      then the value date refers to an expected/requested value date.

      For transaction entries subject to availability/float and for which
      availability information is provided, the value date must not be used. In
      this case the availability component identifies the number of availability
      days.All dates in the JSON payloads are represented in ISO 8601 date-time
      format.

      All date-time fields in responses must include the timezone. An example is
      below:

      2017-04-05T10:43:07+00:00
    type: string
    format: date-time
  AddressLine:
    description: >-
      Information that locates and identifies a specific address for a
      transaction entry, that is presented in free format text.
    type: string
    minLength: 1
    maxLength: 70
  OBActiveOrHistoricCurrencyAndAmount:
    type: object
    required:
      - Amount
      - Currency
    description: Amount of money in the cash transaction entry.
    properties:
      Amount:
        $ref: '#/definitions/OBActiveCurrencyAndAmount_SimpleType'
      Currency:
        $ref: '#/definitions/ActiveOrHistoricCurrencyCode'
  OBCurrencyExchange5:
    type: object
    required:
      - SourceCurrency
      - ExchangeRate
    description: Set of elements used to provide details on the currency exchange.
    properties:
      SourceCurrency:
        description: >-
          Currency from which an amount is to be converted in a currency
          conversion.
        type: string
        pattern: '^[A-Z]{3,3}$'
      TargetCurrency:
        description: >-
          Currency into which an amount is to be converted in a currency
          conversion.
        type: string
        pattern: '^[A-Z]{3,3}$'
      UnitCurrency:
        description: >-
          Currency in which the rate of exchange is expressed in a currency
          exchange. In the example 1GBP = xxxCUR, the unit currency is GBP.
        type: string
        pattern: '^[A-Z]{3,3}$'
      ExchangeRate:
        description: >-
          Factor used to convert an amount from one currency into another. This
          reflects the price at which one currency was bought with another
          currency.

          Usage: ExchangeRate expresses the ratio between UnitCurrency and
          QuotedCurrency (ExchangeRate = UnitCurrency/QuotedCurrency).
        type: number
      ContractIdentification:
        description: >-
          Unique identification to unambiguously identify the foreign exchange
          contract.
        type: string
        minLength: 1
        maxLength: 35
      QuotationDate:
        description: >-
          Date and time at which an exchange rate is quoted.All dates in the
          JSON payloads are represented in ISO 8601 date-time format.

          All date-time fields in responses must include the timezone. An
          example is below:

          2017-04-05T10:43:07+00:00
        type: string
        format: date-time
      InstructedAmount:
        type: object
        required:
          - Amount
          - Currency
        description: >-
          Amount of money to be moved between the debtor and creditor, before
          deduction of charges, expressed in the currency as ordered by the
          initiating party.
        properties:
          Amount:
            $ref: '#/definitions/OBActiveCurrencyAndAmount_SimpleType'
          Currency:
            $ref: '#/definitions/ActiveOrHistoricCurrencyCode'
  OBBankTransactionCodeStructure1:
    type: object
    required:
      - Code
      - SubCode
    description: >-
      Set of elements used to fully identify the type of underlying transaction
      resulting in an entry.
    properties:
      Code:
        description: Specifies the family within a domain.
        type: string
      SubCode:
        description: Specifies the sub-product family within a specific family.
        type: string
  ProprietaryBankTransactionCodeStructure1:
    type: object
    required:
      - Code
    description: Set of elements to fully identify a proprietary bank transaction code.
    properties:
      Code:
        description: >-
          Proprietary bank transaction code to identify the underlying
          transaction.
        type: string
        minLength: 1
        maxLength: 35
      Issuer:
        description: Identification of the issuer of the proprietary bank transaction code.
        type: string
        minLength: 1
        maxLength: 35
  OBMerchantDetails1:
    type: object
    description: Details of the merchant involved in the transaction.
    properties:
      MerchantName:
        description: Name by which the merchant is known.
        type: string
        minLength: 1
        maxLength: 350
      MerchantCategoryCode:
        description: >-
          Category code conform to ISO 18245, related to the type of services or
          goods the merchant provides for the transaction.
        type: string
        minLength: 3
        maxLength: 4
  OBTransactionCashBalance:
    type: object
    required:
      - CreditDebitIndicator
      - Type
      - Amount
    description: >-
      Set of elements used to define the balance as a numerical representation
      of the net increases and decreases in an account after a transaction entry
      is applied to the account.
    properties:
      CreditDebitIndicator:
        $ref: '#/definitions/OBCreditDebitCode'
      Type:
        $ref: '#/definitions/OBBalanceType1Code'
      Amount:
        type: object
        required:
          - Amount
          - Currency
        description: >-
          Amount of money of the cash balance after a transaction entry is
          applied to the account..
        properties:
          Amount:
            $ref: '#/definitions/OBActiveCurrencyAndAmount_SimpleType'
          Currency:
            $ref: '#/definitions/ActiveOrHistoricCurrencyCode'
  OBBranchAndFinancialInstitutionIdentification6:
    type: object
    description: Financial institution servicing an account for the creditor.
    properties:
      SchemeName:
        $ref: '#/definitions/OBExternalFinancialInstitutionIdentification4Code'
      Identification:
        $ref: '#/definitions/Identification'
      Name:
        $ref: '#/definitions/Name'
      PostalAddress:
        type: object
  OBCashAccount6:
    type: object
    description: >-
      Unambiguous identification of the account of the creditor, in the case of
      a debit transaction.
    properties:
      SchemeName:
        $ref: '#/definitions/OBExternalAccountIdentification4Code'
      Identification:
        $ref: '#/definitions/Identification'
      Name:
        $ref: '#/definitions/Name'
      SecondaryIdentification:
        $ref: '#/definitions/SecondaryIdentification'
  OBTransactionCardInstrument1:
    type: object
    required:
      - CardSchemeName
    description: Set of elements to describe the card instrument used in the transaction.
    properties:
      CardSchemeName:
        description: Name of the card scheme.
        type: string
        enum:
          - AmericanExpress
          - Diners
          - Discover
          - MasterCard
          - VISA
      AuthorisationType:
        description: The card authorisation type.
        type: string
        enum:
          - ConsumerDevice
          - Contactless
          - None
          - PIN
      Name:
        description: Name of the cardholder using the card instrument.
        type: string
        minLength: 1
        maxLength: 70
      Identification:
        description: >-
          Identification assigned by an institution to identify the card
          instrument used in the transaction. This identification is known by
          the account owner, and may be masked.
        type: string
        minLength: 1
        maxLength: 34
  OBSupplementaryData1:
    type: object
    properties: {}
    additionalProperties: true
    description: >-
      Additional information that can not be captured in the structured fields
      and/or any other specific block.
  Links:
    type: object
    description: Links relevant to the payload
    properties:
      Self:
        type: string
        format: uri
      First:
        type: string
        format: uri
      Prev:
        type: string
        format: uri
      Next:
        type: string
        format: uri
      Last:
        type: string
        format: uri
    additionalProperties: false
    required:
      - Self
  Meta:
    type: object
    properties:
      TotalPages:
        type: integer
        format: int32
      FirstAvailableDateTime:
        $ref: '#/definitions/ISODateTime'
      LastAvailableDateTime:
        $ref: '#/definitions/ISODateTime'
    title: MetaData
    description: Meta Data relevant to the payload
    additionalProperties: { }
  ISODateTime:
    type: string
    format: date-time
    description: >-
      All dates in the JSON payloads are represented in ISO 8601 date-time
      format.
      
      All date-time fields in responses must include the timezone. An example is
      below:
      
      2017-04-05T10:43:07+00:00
  OBError1:
    type: object
    properties:
      code:
        description: 'error code'
        type: string
      message:
        description: >-
          A description of the error that occurred. e.g., 'A mandatory field
          isn't supplied' or 'RequestedExecutionDateTime must be in future'
        type: string
        minLength: 1
        maxLength: 500
      description:
        description: >-
          A description of the error that occurred. e.g., 'A mandatory field
          isn't supplied' or 'RequestedExecutionDateTime must be in future'
        type: string
        minLength: 1
        maxLength: 1000
    required:
      - code
      - message
      - description
    additionalProperties: false
    minProperties: 1
  OBErrorResponse1:
    type: object
    properties:
      errors:
        type: array
        items:
          $ref: '#/definitions/OBError1'
        minItems: 1
x-wso2-security:
  apim:
    x-wso2-scopes:
      - name: accounts
        description: This scope will group the AccountAPI related operations.
        key: accounts
        roles: Internal/subscriber